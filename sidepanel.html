<!doctype html>
<html data-theme="auto">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Autoline</title>
    <link rel="stylesheet" href="sidepanel.css" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
  </head>
  <body>
    <div class="app">
      <header class="topbar">
        <div class="brand">
          <div class="logo">A</div>
          <div class="title">Autoline</div>
        </div>

        <div class="topbarBtns">
          <!-- Play -->
          <button id="playBtn" class="iconBtn" title="Play" aria-label="Play">
            <span class="material-icons" aria-hidden="true">play_arrow</span>
          </button>

          <!-- Stop -->
          <button id="stopBtn" class="iconBtn" title="Stop" aria-label="Stop">
            <span class="material-icons" aria-hidden="true">stop</span>
          </button>

          <!-- Settings (wrench) -->
          <button id="settingsBtn" class="iconBtn" title="Settings" aria-label="Settings">
            <span class="material-icons" aria-hidden="true">settings</span>
          </button>

          <!-- Add Node -->
          <button id="addNodeBtn" class="iconBtn" title="Add Node" aria-label="Add Node">
            <span class="material-icons" aria-hidden="true">add</span>
          </button>
        </div>
      </header>

      <main class="content">
        <section class="actionsSection">
          <div class="actionsHeader">
            <div class="workflowTitle">
              <input
                id="workflowNameInput"
                class="workflowNameInput"
                type="text"
                value="Workflow"
                readonly
                title="Click to edit"
              />
            </div>
            <div class="actionsHeaderBtns">
              <button id="workflowsBtn" class="btn">Workflows</button>
              <button id="saveWorkflowBtn" class="btn primary">Save</button>
            </div>
          </div>
          <div id="actionsList" class="actionsList"></div>
        </section>
      </main>

      <!-- Add Node Modal -->
      <div id="modalBackdrop" class="backdrop hidden" role="dialog" aria-modal="true">
        <div class="modal">
          <div class="modalHeader">
            <div class="modalTitle">Add Node</div>
            <button id="closeModalBtn" class="iconBtn small" aria-label="Close">
              <span class="material-icons" aria-hidden="true">close</span>
            </button>
          </div>

          <div class="modalBody">
            <button id="addSwitchTabNode" class="nodeItem">
              <div class="nodeName">Switch Tab</div>
              <div class="nodeHint">Activate a recorded tab during replay</div>
            </button>

            <button id="addDelayNode" class="nodeItem">
              <div class="nodeName">Delay</div>
              <div class="nodeHint">Wait before the next action</div>
            </button>

            <button id="addOpenUrlNode" class="nodeItem">
              <div class="nodeName">Open URL</div>
              <div class="nodeHint">Navigate the active tab to a URL</div>
            </button>

            <button id="addClickNode" class="nodeItem">
              <div class="nodeName">Click</div>
              <div class="nodeHint">Record and replay a precise click on the page</div>
            </button>

            <button id="addReloadTabNode" class="nodeItem">
              <div class="nodeName">Reload Tab</div>
              <div class="nodeHint">Refresh the active tab</div>
            </button>

            <button id="addSimpleLoopNode" class="nodeItem">
              <div class="nodeName">Simple Loop</div>
              <div class="nodeHint">Repeat the entire flow until stopped</div>
            </button>

            <button id="addTextBlocksNode" class="nodeItem">
              <div class="nodeName">Text Blocks</div>
              <div class="nodeHint">Insert saved text blocks into fields</div>
            </button>

            <button id="addClipboardNode" class="nodeItem">
              <div class="nodeName">Clipboard</div>
              <div class="nodeHint">Copy the current selection or paste clipboard text</div>
            </button>

            <button id="addKeyboardNode" class="nodeItem">
              <div class="nodeName">Keyboard</div>
              <div class="nodeHint">Send keyboard shortcuts or navigation keys</div>
            </button>

            <button id="addSheetsCheckValueNode" class="nodeItem">
              <div class="nodeName">Sheets Check Value</div>
              <div class="nodeHint">Validate the selected Google Sheets cell value</div>
            </button>

            <button id="addSheetsCopyNode" class="nodeItem">
              <div class="nodeName">Sheets Copy</div>
              <div class="nodeHint">Copy the active Google Sheets cell text</div>
            </button>

            <button id="addSheetsPasteNode" class="nodeItem">
              <div class="nodeName">Sheets Paste</div>
              <div class="nodeHint">Paste the runtime clipboard into the focused field</div>
            </button>

            <button id="addHiggsfieldAiNode" class="nodeItem">
              <div class="nodeName">Higgsfield AI</div>
              <div class="nodeHint">Wait for job capacity based on status phrases</div>
            </button>
          </div>
        </div>
      </div>

      <!-- Settings Modal -->
      <div id="settingsBackdrop" class="backdrop hidden" role="dialog" aria-modal="true">
        <div class="modal">
          <div class="modalHeader">
            <div class="modalTitle">Settings</div>
            <button id="closeSettingsBtn" class="iconBtn small" aria-label="Close">
              <span class="material-icons" aria-hidden="true">close</span>
            </button>
          </div>

          <div class="modalBody">
            <div class="formRow">
              <label class="label">Actions delay</label>
              <input id="globalDelayInput" class="input" type="number" step="0.1" min="0" />
              <div class="hint">Default: 1 sec</div>
            </div>

            <div class="formRow">
              <label class="label" for="themeSelect">Theme</label>
              <select id="themeSelect" class="select">
                <option value="auto">Auto (match system)</option>
                <option value="light">Light</option>
                <option value="dark">Dark</option>
              </select>
              <div class="hint">Choose a high-contrast glass theme.</div>
            </div>

            <div class="pointerSection">
              <div class="pointerSectionTitle">Mouse Pointer</div>
              <div id="pointerPreview" class="pointerPreview" aria-hidden="true">
                <div class="pointerPreviewText">
                  “Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut
                  labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris
                  nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit
                  esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt
                  in culpa qui officia deserunt mollit anim id est laborum. Curabitur pretium tincidunt lacus, nulla
                  gravida orci a odio. Nullam varius, turpis et commodo pharetra, est eros bibendum elit, nec luctus
                  magna felis sollicitudin mauris. Integer in mauris eu nibh euismod gravida.”
                </div>
                <div id="pointerPreviewPointer" class="pointerPreviewPointer">
                  <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                    <path
                      d="M 10.88,31.19 0.12,2.49 A 1.85,1.85 0 0 1 2.48,0.11 L 31.17,10.67 a 1.27,1.27 0 0 1 -0.11,2.42 l -10.33,2.73 a 6.82,6.81 0 0 0 -4.87,4.94 l -2.58,10.3 a 1.25,1.25 0 0 1 -2.39,0.14 z"
                      transform="translate(-0.12 -0.11) scale(1.0296)"
                    />
                  </svg>
                </div>
              </div>

              <div class="pointerControls">
                <div class="formRow">
                  <label class="label" for="pointerSizeInput">Size (px)</label>
                  <input id="pointerSizeInput" class="input" type="number" min="8" step="1" />
                </div>

                <div class="formRow">
                  <label class="label" for="pointerOutlineInput">Outline thickness</label>
                  <input id="pointerOutlineInput" class="input" type="number" min="0" step="0.5" />
                </div>

                <div class="formRow">
                  <label class="label" for="pointerFillInput">Fill</label>
                  <input id="pointerFillInput" class="input" type="color" />
                </div>

                <div class="formRow">
                  <label class="label" for="pointerOutlineColorInput">Outline</label>
                  <input id="pointerOutlineColorInput" class="input" type="color" />
                </div>

                <div class="formRow spanTwo">
                  <label class="label" for="pointerShadowToggle">Shadow</label>
                  <label class="toggleRow">
                    <input id="pointerShadowToggle" type="checkbox" />
                    <span>Enabled</span>
                  </label>
                </div>

                <div class="formRow">
                  <label class="label" for="pointerShadowBlurInput">Blur</label>
                  <input id="pointerShadowBlurInput" class="input" type="number" min="0" step="1" />
                </div>

                <div class="formRow">
                  <label class="label" for="pointerShadowOpacityInput">Transparency</label>
                  <input id="pointerShadowOpacityInput" class="input" type="number" min="0" max="100" step="1" />
                </div>
              </div>
            </div>

            <div class="formActions">
              <button id="saveSettingsBtn" class="btn primary">Save</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Workflows Modal -->
      <div id="workflowsBackdrop" class="backdrop hidden" role="dialog" aria-modal="true">
        <div class="modal">
          <div class="modalHeader">
            <div class="modalTitle">Workflows</div>
            <button id="closeWorkflowsBtn" class="iconBtn small" aria-label="Close">
              <span class="material-icons" aria-hidden="true">close</span>
            </button>
          </div>

          <div class="modalBody">
            <div id="workflowsList" class="workflowsList"></div>
          </div>
        </div>
      </div>

      <!-- Workflow JSON Modal -->
      <div id="workflowJsonBackdrop" class="backdrop hidden" role="dialog" aria-modal="true">
        <div class="modal modalWide">
          <div class="modalHeader">
            <div id="workflowJsonTitle" class="modalTitle">Workflow JSON</div>
            <button id="closeWorkflowJsonBtn" class="iconBtn small" aria-label="Close">
              <span class="material-icons" aria-hidden="true">close</span>
            </button>
          </div>
          <div class="modalBody">
            <div id="workflowJsonText" class="jsonBox workflowJsonBox"></div>
            <div class="formActions">
              <button id="copyWorkflowJsonBtn" class="btn">Copy JSON</button>
              <button id="backToWorkflowsBtn" class="btn primary">Back to list</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Sheets Copy Modal -->
      <div id="sheetsCopyBackdrop" class="backdrop hidden" role="dialog" aria-modal="true">
        <div class="modal">
          <div class="modalHeader">
            <div class="modalTitle">Sheets Copy</div>
            <button id="closeSheetsCopyBtn" class="iconBtn small" aria-label="Close">
              <span class="material-icons" aria-hidden="true">close</span>
            </button>
          </div>
          <div class="modalBody">
            <div id="sheetsCopyCell" class="pill">Active cell: -</div>
            <div class="copyBox" id="sheetsCopyText"></div>
            <div class="formActions">
              <button id="sheetsCopyCancelBtn" class="btn">Cancel</button>
              <button id="sheetsCopyBtn" class="btn primary">Copy</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Status / toast -->
      <div id="status" class="status hidden"></div>
    </div>

    <script src="sidepanel.js"></script>
  </body>
</html>
